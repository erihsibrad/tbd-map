const BIN_ID = "68b2fc7d43b1c97be930be9e";
const MASTER_KEY = "$2a$10$50ktT5zrZbCrk5UnSNJaf.zzPNwVcGaUTtVjVbDeHxp31robYTlEu"; // only if private

fetch(`https://api.jsonbin.io/v3/b/$68b2fc7d43b1c97be930be9e/latest`, {
  headers: {
    "X-Master-Key": MASTER_KEY // remove if your bin is public
  }
})
  .then(res => res.json())
  .then(data => {
    const { lat, lon, diameter } = data.record;

    const map = L.map('map').setView([lat, lon], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);

    L.circle([lat, lon], {
      radius: diameter / 2, // Leaflet uses radius, not diameter
      color: 'red',
      fillOpacity: 0.1
    }).addTo(map);
  })
  .catch(err => console.error(err));
